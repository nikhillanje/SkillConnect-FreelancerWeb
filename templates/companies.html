{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SkillConnect - Companies</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
body { 
    font-family: Arial, sans-serif; 
    margin: 0; 
    background: #E0FBE2; 
    position: relative;
    overflow-x: hidden;
}
body::after {
    content: "";
    position: absolute;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    background: rgba(26,95,55,0.1);
    top: -150px;
    left: -150px;
    z-index: 0;
    animation: floatShape 25s ease-in-out infinite;
}
@keyframes floatShape {
    0% { transform: translate(0, 0) rotate(0deg);}
    50% { transform: translate(50px, 80px) rotate(180deg);}
    100% { transform: translate(0, 0) rotate(360deg);}
}
.container { 
    max-width: 1200px; 
    margin: 30px auto; 
    padding: 0 20px; 
    position: relative;
    z-index: 1;
}
h2 { 
    text-align: center; 
    color:#1a5f37; 
    margin-bottom: 30px; 
    font-size: 2em;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
}
.back-btn { 
    display:inline-block; 
    margin:20px 0; 
    padding:10px 20px; 
    background:#1a5f37; 
    color:#fff; 
    border-radius:12px; 
    text-decoration:none; 
    transition:0.3s;
}
.back-btn:hover { background:#145029; }
.companies-grid { 
    display:grid; 
    grid-template-columns: repeat(auto-fill,minmax(250px,1fr)); 
    gap:20px; 
}
.company-card { 
    background:#fff; 
    padding:20px; 
    border-radius:16px; 
    box-shadow:0 6px 18px rgba(0,0,0,0.1); 
    text-align:center; 
    transition: transform 0.3s, box-shadow 0.3s; 
    position: relative; 
}
.company-card:hover { 
    transform:translateY(-6px); 
    box-shadow:0 15px 35px rgba(0,0,0,0.2); 
}
.company-name { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-weight:600; 
    font-size:16px; 
    margin-bottom:12px; 
    gap:12px; 
}
.company-name img { 
    width: 40px; 
    height: 40px; 
    border-radius: 50%; 
    object-fit: cover; 
    border: 2px solid #1a5f37;
}
.company-url { 
    display: flex; 
    justify-content: center; 
    align-items: center; 
    gap: 10px; 
    flex-wrap: wrap; 
}
.company-url a { 
    color:#1a5f37; 
    text-decoration:none; 
    font-weight:500;
}
.company-url a:hover { 
    text-decoration:underline; 
    color:#145029;
}
.copy-btn { 
    padding:6px 12px; 
    font-size:13px; 
    border:none; 
    border-radius:20px; 
    background:#1a5f37; 
    color:#fff; 
    cursor:pointer; 
    transition:0.3s; 
    display:inline-flex;
    align-items:center;
    gap:4px;
}
.copy-btn:hover { background:#145029; }
.tooltip { 
    position: absolute; 
    top: -30px; 
    right: 0; 
    background: #333; 
    color: #fff; 
    padding: 5px 10px; 
    border-radius: 6px; 
    font-size: 12px; 
    opacity: 0; 
    pointer-events: none; 
    transition: opacity 0.3s, transform 0.3s; 
    transform: translateY(-5px);
}
.tooltip.show { 
    opacity: 1; 
    transform: translateY(-15px);
}
@media (max-width: 768px) {
    .companies-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px,1fr));
    }
    .company-name { font-size: 15px; }
}
</style>
</head>
<body>
<div class="container">
    <a href="{% url 'freelancerHome' %}" class="back-btn">‚Üê Back</a>

    <h2>Companies</h2>

    {% if companies %}
    <div class="companies-grid">
        {% for company in companies %}
        <div class="company-card">
            {% if company.company_name %}
            <div class="company-name">
                {% if company.logo %}
                    <img src="{{ company.logo.url }}" alt="{{ company.company_name }} Logo">
                {% else %}
                    <img src="{% static 'images/default-logo.png' %}" alt="Default Logo">
                {% endif %}
                <span>{{ company.company_name }}</span>
            </div>
            {% endif %}
            
            {% if company.company_url %}
            <div class="company-url">
                <a href="{{ company.company_url }}" target="_blank">{{ company.company_url }}</a>
                <button class="copy-btn" onclick="copyToClipboard(this, '{{ company.company_url|escapejs }}')">
                    <span class="material-icons" style="font-size:16px;">content_copy</span> Copy
                </button>
                <span class="tooltip">Copied!</span>
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p style="text-align:center; font-size: 1.2em; color: #1a5f37;">No companies registered yet.</p>
    {% endif %}
</div>

<script>
function copyToClipboard(button, text) {
    navigator.clipboard.writeText(text).then(() => {
        const tooltip = button.nextElementSibling;
        tooltip.classList.add('show');
        setTimeout(() => {
            tooltip.classList.remove('show');
        }, 1200);
    });
}
</script>
</body>
</html>
